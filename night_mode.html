<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>ランプシャッター（夜）</title>
<link rel="preload" href="app.js" as="script">
<style>
html,body{margin:0;height:100%;background:#000;color:#fff;font-family:system-ui,-apple-system}
#hud{position:fixed;top:10px;left:10px;z-index:30}
.badge{font-weight:900;padding:8px 14px;border-radius:12px;font-size:24px}
.ok{background:#17c964;color:#003300}
.ng{background:#e5484d}
#roi{
  position:fixed;
  right:2%;
  top:6%;
  width:45%;
  height:25%;
  border:3px dashed #39e3a5;
  border-radius:10px;
  z-index:25;
  pointer-events:none;
}
#cam{
  position:fixed;
  left:50%;
  bottom:14%;
  transform:translateX(-50%);
  z-index:40;
  border-radius:16px;
  background:#00000090;
  padding:6px;
}
#cam img{
  width:110px;
  height:110px;
  object-fit:contain;
  aspect-ratio:1/1;
  display:block;
}
#preview{
  position:fixed;
  inset:0;
  object-fit:cover;
  transform:scaleX(1); /* 非ミラー */
}
.flash{
  position:fixed;
  inset:0;
  background:#fff;
  opacity:0;
  pointer-events:none;
  z-index:50;
  transition:opacity .15s;
}

/* ライブ統計（プレビュー専用HUD） */
#live-stats{
  position:fixed; left:16px; bottom:18px;
  display:flex; gap:10px; z-index:30;
  pointer-events:none;
}
#live-stats .chip{
  display:inline-flex; align-items:center;
  padding:6px 10px; border-radius:8px;
  background:rgba(0,0,0,.55); backdrop-filter:blur(4px);
  font:600 14px/1.2 -apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  color:#fff; letter-spacing:.3px;
}
#live-stats .chip-red   b{ color:#ff6b6b; }
#live-stats .chip-green b{ color:#39e36f; }
@media (max-width:430px){ #live-stats{ bottom:82px; } }
</style>
</head>
<body>
<div id="hud"><span id="status" class="badge ng">NG?</span></div>
<div id="roi"></div>
<video id="preview" autoplay playsinline muted></video>
<button id="cam"><img src="assets/camera.png" alt="カメラ"></button>
<div id="flash"></div>

<!-- ライブ統計（プレビュー専用） -->
<div id="live-stats" aria-hidden="true">
  <span class="chip chip-red">R: <b id="stat-red">0.0%</b></span>
  <span class="chip chip-green">G: <b id="stat-green">0.0%</b></span>
</div>

<script>window.LS_MODE="night";</script>
<script defer src="app.js"></script>
</body>
</html>
